<?php class UsersController extends Controller {	public function viewall()	{		$this->set('header', 'Hieronder staan alle users in de user tabel');		$users = $this->_model->select_all();		//var_dump($users);		$show_table = '';		foreach ($users as $value)		{			$show_table .= "<tr>								<td class='td'>".$value['User']['user_id']."</td>								<td class='td'>".$value['User']['firstname']."</td>								<td class='td'>".$value['User']['infix']."</td>								<td class='td'>".$value['User']['surname']."</td>								<td class='td'>".$value['Userrole']['role']."</td>								<td class='td'><a href='./remove_user/".$value['User']['user_id']."'>										<img src='../img/drop.png' alt='drop' />									</a>								</td>								<td class='td'><a href='./update_user/".$value['User']['user_id']."'>										<img src='../img/edit.png' alt='drop' />									</a>								</td>						    </tr>";				}		$this->set('show_users', $show_table);	}		public function remove_user($id)	{		$this->_model->remove_user($id);		header('location:../viewall');	}		public function add_user()	{		if (isset($_POST['submit']))		{			$this->_model->insert_into_users($_POST);			header('location:../users/viewall');		}		else		{			$roles = $this->_model->select_all_userroles();			//var_dump($roles);			$userroles = '';			foreach ($roles as $value)			{ 				$userroles .= "<option value='".$value['Userrole']['role']."'>".$value['Userrole']['role']."</option>";			}			$this->set('userroles', $userroles);			$this->set('header', 'Voeg een gebruiker toe');		}	}		public function update_user($id)	{		if (isset($_POST['submit']))		{			$this->_model->update_user($id, $_POST);			header('location:../viewall');		}		else		{			$user = $this->_model->find_user_by_id($id);			//var_dump($user);			$this->set('user', $user);			$this->set('header', 'Wijzig het onderstaande record');		}	}		public function login()	{		if (!empty($_POST['username']) && !empty($_POST['password']))		{						$user = $this->_model->select_user_from_login($_POST);			if ( sizeof($user) > 0)			{				//Zet session_start() in de index.php				$_SESSION['userrole'] = $user[0]['Userrole']['role'];				//var_dump($user);				switch ($user[0]['Userrole']['role'])				{					case "administrator":						$sendToPage = "../administrators/adminhomepage";					break;				}				$header = "U bent succesvol ingelogd";			}			else			{				$header = "Wachtwoord en/of gebruikersnaam niet juist<br />						   U wordt doorgestuurd naar de homepage";				$sendToPage = "../users/viewall";			}		}		else		{			$header = "U heeft een van de velden niet ingevuld.<br />					   U wordt doorgestuurd naar de					   Homepage";			$sendToPage = "../users/viewall";		}		$this->set("header", $header);		header("refresh:4;url=".$sendToPage);	}		public function logout()	{		if ( isset($_SESSION['userrole']))		{			session_destroy();			header("location:../users/viewall");		}	} }?>